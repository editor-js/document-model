name: Main workflow runner
on:
  - pull_request

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: ./.github/actions/setup
      - name: Run ESLint check
        run: yarn lint:ci

  tests:
    runs-on: ubuntu-latest
    steps:
      - uses: ./.github/actions/setup
      - name: Run unit tests
        uses: ArtiomTr/jest-coverage-report-action@v2
        with:
          test-script: "yarn test"
          package-manager: yarn

  mutation-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: ./.github/actions/setup
      - name: Run mutation tests
        run: yarn test:mutations

  build:
    runs-on: ubuntu-latest
    steps:
      - uses: ./.github/actions/setup
      - name: Build the package
        run: yarn build
